# å‰è¨€

ä½œä¸ºä¸€ä¸ªå¼€å‘äº†å¤šä¸ª H5 é¡¹ç›®çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­éš¾å…ä¼šé‡åˆ°ä¸€äº›å…¼å®¹æ€§ç­‰**çˆ¬è¿‡å‘**çš„é—®é¢˜ã€‚ç°åœ¨æˆ‘å°†è¿™äº›é—®é¢˜ä¸€ä¸€æ±‡æ€»ä¸€ä¸‹ï¼Œå¹¶åœ¨åé¢ç»™å‡º**å‘äº§ç”Ÿçš„åŸç†**ï¼Œå’Œ**ç°é˜¶æ®µå¸¸è§„çš„å¡«å‘æ–¹æ¡ˆ**ã€‚ç”±æ­¤æ¥åšä¸€ä¸ªé˜¶æ®µæ€§çš„æ€»ç»“ã€‚

> å¸¸è§„æ“ä½œå“ˆï¼Œ**ç‚¹èµ**åå†è§‚çœ‹å‘—ï¼ä½ çš„**ç‚¹èµ**å°±æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ä¹‹ä¸€ï¼

# é—®é¢˜

ä¸‹é¢åˆ—ä¸¾äº†æˆ‘é‡åˆ°çš„ä¸€äº›å¸¸è§„é—®é¢˜ï¼Œå¦‚æœ‰é‡åˆ°å…¶ä»–é—®é¢˜è¯·åœ¨è¯„è®ºåŒºè¡¥å……ï¼Œä¹‹åæˆ‘ä¹Ÿä¼šå®è·µååŠ ä»¥è¡¥å……ï¼Œæ„Ÿè°¢ï¼ï¼ˆç»å¸¸æ›´æ–°è¯¥æ–‡ï¼‰
## ç§»åŠ¨ç«¯ H5 ç›¸å…³é—®é¢˜æ±‡æ€»ï¼š

- **1px é—®é¢˜**
- **å“åº”å¼å¸ƒå±€**
- **iOS æ»‘åŠ¨ä¸æµç•…**
- **iOS ä¸Šæ‹‰è¾¹ç•Œä¸‹æ‹‰å‡ºç°ç™½è‰²ç©ºç™½**
- **é¡µé¢ä»¶æ”¾å¤§æˆ–ç¼©å°ä¸ç¡®å®šæ€§è¡Œä¸º**
- **click ç‚¹å‡»ç©¿é€ä¸å»¶è¿Ÿ**
- **è½¯é”®ç›˜å¼¹å‡ºå°†é¡µé¢é¡¶èµ·æ¥ã€æ”¶èµ·æœªå›è½é—®é¢˜**
- **iPhone X åº•éƒ¨æ é€‚é…é—®é¢˜**
- **ä¿å­˜é¡µé¢ä¸ºå›¾ç‰‡å’ŒäºŒç»´ç é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ**
- **å¾®ä¿¡å…¬ä¼—å· H5 åˆ†äº«é—®é¢˜**
- **H5 è°ƒç”¨ SDK ç›¸å…³é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ**
- **H5 è°ƒè¯•ç›¸å…³æ–¹æ¡ˆä¸ç­–ç•¥**

## ç§»åŠ¨ç«¯ H5 ç›¸å…³åŸºç¡€æŠ€æœ¯æ¦‚è§ˆ

![](https://user-gold-cdn.xitu.io/2019/12/24/16f368720d3eb421?w=2206&h=1140&f=jpeg&s=247732)

# åŸç†ä¸å®è·µ

ä¹‹å‰ä¸¤ç¯‡æ–‡ç« å·²ç»è¯¦ç»†çš„è®ºè¿°äº†**1px** é—®é¢˜ä¸ **å“åº”å¼å¸ƒå±€**é—®é¢˜ï¼Œå¹¶ç»™å‡ºäº†åŸç†å’Œè§£å†³æ–¹æ¡ˆã€‚
> é˜²æ­¢ä¸¢å¤±ï¼Œ**ç‚¹èµæ”¶è—**åè·³è½¬è‡³å¿«æ·é€šé“ï¼š[**1px**](https://juejin.im/entry/5df32ffd6fb9a016194afb5e)é€šé“ä¸[å“åº”å¼å¸ƒå±€](https://juejin.im/entry/5df613c3f265da33ca400e72)é€šé“

æ¥ä¸‹æ¥å‘¢ï¼Œæˆ‘ä»¬çœ‹çœ‹å…¶ä»–é—®é¢˜çš„åŸç†å’Œè§£å†³æ–¹æ¡ˆå§ã€‚
> ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼Œå‡ç»è¿‡æˆ‘æµ‹è¯•æˆåŠŸï¼Œå¥åº·å®‰å…¨ï¼Œè¯·æ”¾ä¸‹é£Ÿç”¨ã€‚ç”±äºç¯‡å¹…åŸå› ï¼ŒæŸäº›éæ ¸å¿ƒè§£å†³æ–¹æ¡ˆçš„å®ç°ç»†èŠ‚æš‚æœªè°ˆè®ºï¼Œéœ€è¦è‡ªè¡Œç ”ç©¶ã€‚

## iOS æ»‘åŠ¨ä¸æµç•…

### è¡¨ç°
ä¸Šä¸‹æ»‘åŠ¨é¡µé¢ä¼šäº§ç”Ÿå¡é¡¿ï¼Œæ‰‹æŒ‡ç¦»å¼€é¡µé¢ï¼Œé¡µé¢ç«‹å³åœæ­¢è¿åŠ¨ã€‚æ•´ä½“è¡¨ç°å°±æ˜¯æ»‘åŠ¨ä¸æµç•…ï¼Œæ²¡æœ‰æ»‘åŠ¨æƒ¯æ€§ã€‚

### äº§ç”ŸåŸå› 
**ä¸ºä»€ä¹ˆ iOS çš„ webview ä¸­ æ»‘åŠ¨ä¸æµç•…ï¼Œå®ƒæ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Ÿ**

æœ€ç»ˆæˆ‘åœ¨ `safari` æ–‡æ¡£é‡Œé¢å¯»æ‰¾åˆ°äº†ç­”æ¡ˆï¼ˆæ–‡æ¡£é“¾æ¥åœ¨å‚è€ƒèµ„æ–™é¡¹ï¼‰ã€‚

![](https://user-gold-cdn.xitu.io/2019/12/19/16f1daab7c41e044?w=1420&h=1104&f=jpeg&s=165493)

åŸæ¥åœ¨ iOS 5.0 ä»¥åŠä¹‹åçš„ç‰ˆæœ¬ï¼Œæ»‘åŠ¨æœ‰å®šä¹‰æœ‰ä¸¤ä¸ªå€¼ `auto` å’Œ `touch`ï¼Œé»˜è®¤å€¼ä¸º `auto`ã€‚
```css
-webkit-overflow-scrolling: touch; /* å½“æ‰‹æŒ‡ä»è§¦æ‘¸å±ä¸Šç§»å¼€ï¼Œä¼šä¿æŒä¸€æ®µæ—¶é—´çš„æ»šåŠ¨ */

-webkit-overflow-scrolling: auto; /* å½“æ‰‹æŒ‡ä»è§¦æ‘¸å±ä¸Šç§»å¼€ï¼Œæ»šåŠ¨ä¼šç«‹å³åœæ­¢ */
```

### è§£å†³æ–¹æ¡ˆ
#### 1.åœ¨æ»šåŠ¨å®¹å™¨ä¸Šå¢åŠ æ»šåŠ¨ touch æ–¹æ³•
å°†`-webkit-overflow-scrolling` å€¼è®¾ç½®ä¸º `touch`
```css
.wrapper {
    -webkit-overflow-scrolling: touch;
}
```
> è®¾ç½®æ»šåŠ¨æ¡éšè—ï¼š `.container ::-webkit-scrollbar {display: none;}`

å¯èƒ½ä¼šå¯¼è‡´ä½¿ç”¨`position:fixed;` å›ºå®šå®šä½çš„å…ƒç´ ï¼Œéšç€é¡µé¢ä¸€èµ·æ»šåŠ¨
#### 2.è®¾ç½® overflow 
è®¾ç½®å¤–éƒ¨ `overflow` ä¸º `hidden`,è®¾ç½®å†…å®¹å…ƒç´  `overflow` ä¸º `auto`ã€‚å†…éƒ¨å…ƒç´ è¶…å‡º body å³äº§ç”Ÿæ»šåŠ¨ï¼Œè¶…å‡ºçš„éƒ¨åˆ† body éšè—ã€‚

```css
body {
    overflow-y: hidden;
}
.wrapper {
    overflow-y: auto;
}
```
> ä¸¤è€…ç»“åˆä½¿ç”¨æ›´ä½³ï¼


## iOS ä¸Šæ‹‰è¾¹ç•Œä¸‹æ‹‰å‡ºç°ç™½è‰²ç©ºç™½

### è¡¨ç°
æ‰‹æŒ‡æŒ‰ä½å±å¹•ä¸‹æ‹‰ï¼Œå±å¹•é¡¶éƒ¨ä¼šå¤šå‡ºä¸€å—ç™½è‰²åŒºåŸŸã€‚æ‰‹æŒ‡æŒ‰ä½å±å¹•ä¸Šæ‹‰ï¼Œåº•éƒ¨å¤šå‡ºä¸€å—ç™½è‰²åŒºåŸŸã€‚

### äº§ç”ŸåŸå› 

åœ¨ iOS ä¸­ï¼Œæ‰‹æŒ‡æŒ‰ä½å±å¹•ä¸Šä¸‹æ‹–åŠ¨ï¼Œä¼šè§¦å‘ `touchmove` äº‹ä»¶ã€‚è¿™ä¸ªäº‹ä»¶è§¦å‘çš„å¯¹è±¡æ˜¯æ•´ä¸ª `webview` å®¹å™¨ï¼Œå®¹å™¨è‡ªç„¶ä¼šè¢«æ‹–åŠ¨ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†ä¼šæˆç©ºç™½ã€‚

### è§£å†³æ–¹æ¡ˆ

#### 1. ç›‘å¬äº‹ä»¶ç¦æ­¢æ»‘åŠ¨
ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«å®šä¹‰ä¸º
```
1. touchstart ï¼šæ‰‹æŒ‡æ”¾åœ¨ä¸€ä¸ªDOMå…ƒç´ ä¸Šã€‚
2. touchmove ï¼šæ‰‹æŒ‡æ‹–æ›³ä¸€ä¸ªDOMå…ƒç´ ã€‚
3. touchend ï¼šæ‰‹æŒ‡ä»ä¸€ä¸ªDOMå…ƒç´ ä¸Šç§»å¼€ã€‚
```
æ˜¾ç„¶æˆ‘ä»¬éœ€è¦æ§åˆ¶çš„æ˜¯ `touchmove` äº‹ä»¶ï¼Œç”±æ­¤æˆ‘åœ¨ W3C æ–‡æ¡£ä¸­æ‰¾åˆ°äº†è¿™æ ·ä¸€æ®µè¯
> Note that the rate at which the user agent sends touchmove events is implementation-defined, and may depend on hardware capabilities and other implementation details.

> If the preventDefault method is called on the first touchmove event of an active touch point, it should prevent any default action caused by any touchmove event associated with the same active touch point, such as scrolling.

**`touchmove` äº‹ä»¶çš„é€Ÿåº¦æ˜¯å¯ä»¥å®ç°å®šä¹‰çš„ï¼Œå–å†³äºç¡¬ä»¶æ€§èƒ½å’Œå…¶ä»–å®ç°ç»†èŠ‚**

**`preventDefault` æ–¹æ³•ï¼Œé˜»æ­¢åŒä¸€è§¦ç‚¹ä¸Šæ‰€æœ‰é»˜è®¤è¡Œä¸ºï¼Œæ¯”å¦‚æ»šåŠ¨ã€‚**

ç”±æ­¤æˆ‘ä»¬æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ç›‘å¬ `touchmove`ï¼Œè®©éœ€è¦æ»‘åŠ¨çš„åœ°æ–¹æ»‘åŠ¨ï¼Œä¸éœ€è¦æ»‘åŠ¨çš„åœ°æ–¹ç¦æ­¢æ»‘åŠ¨ã€‚

> å€¼å¾—æ³¨æ„çš„æ˜¯æˆ‘ä»¬è¦è¿‡æ»¤æ‰å…·æœ‰æ»šåŠ¨å®¹å™¨çš„å…ƒç´ ã€‚

å®ç°å¦‚ä¸‹ï¼š
```js
document.body.addEventListener('touchmove', function(e) {
    if(e._isScroller) return;
    // é˜»æ­¢é»˜è®¤äº‹ä»¶
    e.preventDefault();
}, {
    passive: false
});
```

####  2. æ»šåŠ¨å¦¥åå¡«å……ç©ºç™½ï¼Œè£…é¥°æˆå…¶ä»–åŠŸèƒ½
åœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å»è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¢ä¸€ç›´æ€è·¯ã€‚æ ¹æ®åœºæ™¯ï¼Œ**æˆ‘ä»¬å¯ä»¥å°†ä¸‹æ‹‰ä½œä¸ºä¸€ä¸ªåŠŸèƒ½æ€§çš„æ“ä½œ**ã€‚

**æ¯”å¦‚ï¼š ä¸‹æ‹‰ååˆ·æ–°é¡µé¢**


![](https://user-gold-cdn.xitu.io/2019/12/20/16f219d17a6fd448?w=754&h=1326&f=jpeg&s=183570)
## é¡µé¢æ”¾å¤§æˆ–ç¼©å°ä¸ç¡®å®šæ€§è¡Œä¸º

### è¡¨ç°
åŒå‡»æˆ–è€…åŒæŒ‡å¼ å¼€æ‰‹æŒ‡é¡µé¢å…ƒç´ ï¼Œé¡µé¢ä¼šæ”¾å¤§æˆ–ç¼©å°ã€‚

### äº§ç”ŸåŸå› 
HTML æœ¬èº«ä¼šäº§ç”Ÿæ”¾å¤§æˆ–ç¼©å°çš„è¡Œä¸ºï¼Œæ¯”å¦‚åœ¨ PC æµè§ˆå™¨ä¸Šï¼Œå¯ä»¥è‡ªç”±æ§åˆ¶é¡µé¢çš„æ”¾å¤§ç¼©å°ã€‚ä½†æ˜¯åœ¨ç§»åŠ¨ç«¯ï¼Œæˆ‘ä»¬æ˜¯ä¸éœ€è¦è¿™ä¸ªè¡Œä¸ºçš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ç¦æ­¢è¯¥ä¸ç¡®å®šæ€§è¡Œä¸ºï¼Œæ¥æå‡ç”¨æˆ·ä½“éªŒã€‚
### åŸç†ä¸è§£å†³æ–¹æ¡ˆ

HTML `meta` å…ƒæ ‡ç­¾æ ‡å‡†ä¸­æœ‰ä¸ª ä¸­ `viewport` å±æ€§ï¼Œç”¨æ¥æ§åˆ¶é¡µé¢çš„ç¼©æ”¾ï¼Œä¸€èˆ¬ç”¨äºç§»åŠ¨ç«¯ã€‚å¦‚ä¸‹å›¾ MDN ä¸­ä»‹ç»

![](https://user-gold-cdn.xitu.io/2019/12/19/16f1cf528e787498?w=1294&h=1202&f=jpeg&s=325010)
ç§»åŠ¨ç«¯å¸¸è§„å†™æ³•

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0">
```
å› æ­¤æˆ‘ä»¬å¯ä»¥è®¾ç½® `maximum-scale`ã€`minimum-scale` ä¸ `user-scalable=no` ç”¨æ¥é¿å…è¿™ä¸ªé—®é¢˜
```html
<meta name=viewport
  content="width=device-width, initial-scale=1.0, minimum-scale=1.0 maximum-scale=1.0, user-scalable=no">
```

## click ç‚¹å‡»äº‹ä»¶å»¶æ—¶ä¸ç©¿é€

### è¡¨ç°
ç›‘å¬å…ƒç´  `click` äº‹ä»¶ï¼Œç‚¹å‡»å…ƒç´ è§¦å‘æ—¶é—´å»¶è¿Ÿçº¦ `300ms`ã€‚

ç‚¹å‡»è’™å±‚ï¼Œè’™å±‚æ¶ˆå¤±åï¼Œä¸‹å±‚å…ƒç´ ç‚¹å‡»è§¦å‘ã€‚

### äº§ç”ŸåŸå› 
#### ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ click å»¶æ—¶ï¼Ÿ
iOS ä¸­çš„ safariï¼Œä¸ºäº†å®ç°åŒå‡»ç¼©æ”¾æ“ä½œï¼Œåœ¨å•å‡» 300ms ä¹‹åï¼Œå¦‚æœæœªè¿›è¡Œç¬¬äºŒæ¬¡ç‚¹å‡»ï¼Œåˆ™æ‰§è¡Œ `click` å•å‡»æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´æ¥åˆ¤æ–­ç”¨æˆ·è¡Œä¸ºæ˜¯å¦ä¸ºåŒå‡»äº§ç”Ÿçš„ã€‚ä½†æ˜¯ï¼Œåœ¨ App ä¸­ï¼Œæ— è®ºæ˜¯å¦éœ€è¦åŒå‡»ç¼©æ”¾è¿™ç§è¡Œä¸ºï¼Œ`click` å•å‡»éƒ½ä¼šäº§ç”Ÿ 300ms å»¶è¿Ÿã€‚
>
#### ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ click ç‚¹å‡»ç©¿é€ï¼Ÿ
åŒå±‚å…ƒç´ å åŠ æ—¶ï¼Œåœ¨ä¸Šå±‚å…ƒç´ ä¸Šç»‘å®š `touch` äº‹ä»¶ï¼Œä¸‹å±‚å…ƒç´ ç»‘å®š `click` äº‹ä»¶ã€‚ç”±äº `click` å‘ç”Ÿåœ¨ `touch` ä¹‹åï¼Œç‚¹å‡»ä¸Šå±‚å…ƒç´ ï¼Œå…ƒç´ æ¶ˆå¤±ï¼Œä¸‹å±‚å…ƒç´ ä¼šè§¦å‘ `click` äº‹ä»¶ï¼Œç”±æ­¤äº§ç”Ÿäº†ç‚¹å‡»ç©¿é€çš„æ•ˆæœã€‚
### åŸç†ä¸è§£å†³æ–¹æ¡ˆ
#### è§£å†³æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ touchstart æ›¿æ¢ click

å‰é¢å·²ç»ä»‹ç»äº†ï¼Œç§»åŠ¨è®¾å¤‡ä¸ä»…æ”¯æŒç‚¹å‡»ï¼Œè¿˜æ”¯æŒå‡ ä¸ªè§¦æ‘¸äº‹ä»¶ã€‚
é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨åŸºæœ¬æ€è·¯å°±æ˜¯ç”¨ `touch` äº‹ä»¶ä»£æ›¿`click` äº‹ä»¶ã€‚

å°† `click` æ›¿æ¢æˆ `touchstart` ä¸ä»…è§£å†³äº† `click` äº‹ä»¶éƒ½å»¶æ—¶é—®é¢˜ï¼Œè¿˜è§£å†³äº†ç©¿é€é—®é¢˜ã€‚å› ä¸ºç©¿é€é—®é¢˜æ˜¯åœ¨ `touch` å’Œ `click` æ··ç”¨æ—¶äº§ç”Ÿã€‚

åœ¨åŸç”Ÿä¸­ä½¿ç”¨
```js
el.addEventListener("touchstart", () => { console.log("ok"); }, false);
```

åœ¨ vue ä¸­ä½¿ç”¨
```html
<button @touchstart="handleTouchstart()">ç‚¹å‡»</button>
```

å¼€æºè§£å†³æ–¹æ¡ˆä¸­ï¼Œä¹Ÿæ˜¯æ—¢æä¾›äº† `click` äº‹ä»¶ï¼Œåˆæä¾›äº†`touchstart` äº‹ä»¶ã€‚å¦‚ vant ä¸­çš„ `button` ç»„ä»¶

![](https://user-gold-cdn.xitu.io/2019/12/19/16f1d13300321655?w=1512&h=368&f=jpeg&s=59760)

**é‚£ä¹ˆï¼Œæ˜¯å¦å¯ä»¥å°† `click` äº‹ä»¶å…¨éƒ¨æ›¿æ¢æˆ `touchstart` å‘¢ï¼Ÿä¸ºä»€ä¹ˆå¼€æºæ¡†æ¶è¿˜ä¼šç»™å‡º `click` äº‹ä»¶å‘¢ï¼Ÿ**

æˆ‘ä»¬æƒ³è±¡ä¸€ç§æƒ…æ™¯ï¼ŒåŒæ—¶éœ€è¦ç‚¹å‡»å’Œæ»‘åŠ¨çš„åœºæ™¯ä¸‹ã€‚å¦‚æœå°† `click` æ›¿æ¢æˆ `touchstart` ä¼šæ€æ ·ï¼Ÿ

> äº‹ä»¶è§¦å‘é¡ºåº: `touchstart`, `touchmove`, `touchend`, `click`ã€‚

å¾ˆå®¹æ˜“æƒ³è±¡ï¼Œåœ¨æˆ‘éœ€è¦`touchmove`æ»‘åŠ¨æ—¶å€™ï¼Œä¼˜å…ˆè§¦å‘äº†`touchstart`çš„ç‚¹å‡»äº‹ä»¶ï¼Œæ˜¯ä¸æ˜¯å·²ç»äº§ç”Ÿäº†å†²çªå‘¢ï¼Ÿ

æ‰€ä»¥å‘¢ï¼Œåœ¨å…·æœ‰æ»šåŠ¨çš„æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨ `click` å¤„ç†ã€‚

åœ¨æ¥ä¸‹æ¥çš„`fastclick`å¼€æºåº“ä¸­ä¹Ÿåšäº†å¦‚ä¸‹å¤„ç†ã€‚
é’ˆå¯¹ `touchstart` å’Œ `touchend`ï¼Œæˆªå–äº†éƒ¨åˆ†æºç ã€‚
```js
// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:
// 1) the user does a fling scroll on the scrollable layer
// 2) the user stops the fling scroll with another tap
// then the event.target of the last 'touchend' event will be the element that was under the user's finger
// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check
// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).
this.updateScrollParent(targetElement);
```
```js
// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled
// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).
scrollParent = targetElement.fastClickScrollParent;
if (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {
	return true;
}
```
ä¸»è¦ç›®çš„å°±æ˜¯ï¼Œåœ¨ä½¿ç”¨ `touchstart` åˆæˆ `click` äº‹ä»¶æ—¶ï¼Œä¿è¯å…¶ä¸åœ¨æ»šåŠ¨çš„çˆ¶å…ƒç´ ä¹‹ä¸‹ã€‚
#### è§£å†³æ–¹æ¡ˆäºŒï¼š ä½¿ç”¨ fastclick åº“
ä½¿ç”¨ `npm/yarn` å®‰è£…åä½¿ç”¨
```js
import FastClick from 'fastclick';

FastClick.attach(document.body, options);
```
åŒæ ·ï¼Œä½¿ç”¨`fastclick`åº“åï¼Œ`click` å»¶æ—¶å’Œç©¿é€é—®é¢˜éƒ½æ²¡äº†

æŒ‰ç…§æˆ‘çš„æƒ¯ä¾‹ï¼Œåªè¦æ¶‰åŠå¼€æºåº“ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€å®šè¦å»äº†è§£å®ƒå®ç°çš„åŸç†ã€‚ä¸»è¦æ˜¯å°†ç°æœ‰çš„åŸç”Ÿäº‹ä»¶é›†åˆå°è£…åˆæˆä¸€ä¸ªå…¼å®¹æ€§è¾ƒå¼ºçš„äº‹ä»¶é›†åˆã€‚

[fastclickæºç ](https://github.com/ftlabs/fastclick/blob/master/lib/fastclick.js) æ ¸å¿ƒä»£ç ä¸é•¿ï¼Œ 1000 è¡Œä¸åˆ°ã€‚æœ‰å…´è¶£å¯ä»¥äº†è§£ä¸€ä¸‹!


## è½¯é”®ç›˜å°†é¡µé¢é¡¶èµ·æ¥ã€æ”¶èµ·æœªå›è½é—®é¢˜
### è¡¨ç°
Android æ‰‹æœºä¸­ï¼Œç‚¹å‡» `input` æ¡†æ—¶ï¼Œé”®ç›˜å¼¹å‡ºï¼Œå°†é¡µé¢é¡¶èµ·æ¥ï¼Œå¯¼è‡´é¡µé¢æ ·å¼é”™ä¹±ã€‚

ç§»å¼€ç„¦ç‚¹æ—¶ï¼Œé”®ç›˜æ”¶èµ·ï¼Œé”®ç›˜åŒºåŸŸç©ºç™½ï¼Œæœªå›è½ã€‚

### äº§ç”ŸåŸå› 
æˆ‘ä»¬åœ¨app å¸ƒå±€ä¸­ä¼šæœ‰ä¸ªå›ºå®šçš„åº•éƒ¨ã€‚å®‰å“ä¸€äº›ç‰ˆæœ¬ä¸­ï¼Œè¾“å…¥å¼¹çª—å‡ºæ¥ï¼Œä¼šå°†è§£å‹ `absolute` å’Œ `fixed` å®šä½çš„å…ƒç´ ã€‚å¯¼è‡´å¯è§†åŒºåŸŸå˜å°ï¼Œå¸ƒå±€é”™ä¹±ã€‚
### åŸç†ä¸è§£å†³æ–¹æ¡ˆ
è½¯é”®ç›˜å°†é¡µé¢é¡¶èµ·æ¥çš„è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦æ˜¯é€šè¿‡ç›‘å¬é¡µé¢é«˜åº¦å˜åŒ–ï¼Œå¼ºåˆ¶æ¢å¤æˆå¼¹å‡ºå‰çš„é«˜åº¦ã€‚
```js
// è®°å½•åŸæœ‰çš„è§†å£é«˜åº¦
const originalHeight = document.body.clientHeight || document.documentElement.clientHeight;

window.onresize = function(){
  var resizeHeight = document.documentElement.clientHeight || document.body.clientHeight;
  if(resizeHeight < originalHeight ){
    // æ¢å¤å†…å®¹åŒºåŸŸé«˜åº¦
    // const container = document.getElementById("container")
    // ä¾‹å¦‚ container.style.height = originalHeight;
  }
}
```

é”®ç›˜ä¸èƒ½å›è½é—®é¢˜å‡ºç°åœ¨ iOS 12+ å’Œ wechat 6.7.4+ ä¸­ï¼Œè€Œåœ¨å¾®ä¿¡ H5 å¼€å‘ä¸­æ˜¯æ¯”è¾ƒå¸¸è§çš„ Bugã€‚

å…¼å®¹åŸç†ï¼Œ1.åˆ¤æ–­ç‰ˆæœ¬ç±»å‹ 2.æ›´æ”¹æ»šåŠ¨çš„å¯è§†åŒºåŸŸ
```js
const isWechat = window.navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i);
if (!isWechat) return;
const wechatVersion = wechatInfo[1];
const version = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
 
 // å¦‚æœè®¾å¤‡ç±»å‹ä¸ºiOS 12+ å’Œwechat 6.7.4+ï¼Œæ¢å¤æˆåŸæ¥çš„è§†å£
if (+wechatVersion.replace(/\./g, '') >= 674 && +version[1] >= 12) {
  window.scrollTo(0, Math.max(document.body.clientHeight, document.documentElement.clientHeight));
}
```
> `window.scrollTo(x-coord, y-coord)`ï¼Œå…¶ä¸­`window.scrollTo(0, clientHeight)`æ¢å¤æˆåŸæ¥çš„è§†å£

## iPhone Xç³»åˆ—å®‰å…¨åŒºåŸŸé€‚é…é—®é¢˜
### è¡¨ç°
å¤´éƒ¨åˆ˜æµ·ä¸¤ä¾§åŒºåŸŸæˆ–è€…åº•éƒ¨åŒºåŸŸï¼Œå‡ºç°åˆ˜æµ·é®æŒ¡æ–‡å­—ï¼Œæˆ–è€…å‘ˆç°é»‘åº•æˆ–ç™½åº•ç©ºç™½åŒºåŸŸã€‚
### äº§ç”ŸåŸå› 
iPhone X ä»¥åŠå®ƒä»¥ä¸Šçš„ç³»åˆ—ï¼Œéƒ½é‡‡ç”¨**åˆ˜æµ·å±è®¾è®¡**å’Œ**å…¨é¢å±æ‰‹åŠ¿**ã€‚å¤´éƒ¨ã€åº•éƒ¨ã€ä¾§è¾¹éƒ½éœ€è¦åšç‰¹æ®Šå¤„ç†ã€‚æ‰èƒ½é€‚é… iPhone X çš„ç‰¹æ®Šæƒ…å†µã€‚
### è§£å†³æ–¹æ¡ˆ
**è®¾ç½®å®‰å…¨åŒºåŸŸï¼Œå¡«å……å±é™©åŒºåŸŸï¼Œå±é™©åŒºåŸŸä¸åšæ“ä½œå’Œå†…å®¹å±•ç¤ºã€‚**
> å±é™©åŒºåŸŸæŒ‡å¤´éƒ¨ä¸è§„åˆ™åŒºåŸŸï¼Œåº•éƒ¨æ¨ªæ¡åŒºåŸŸï¼Œå·¦å³è§¦å‘åŒºåŸŸã€‚

![](https://user-gold-cdn.xitu.io/2019/12/19/16f1d31150e79cb9?w=1118&h=594&f=jpeg&s=49124)
å…·ä½“æ“ä½œä¸ºï¼š`viewport-fit` `meta` æ ‡ç­¾è®¾ç½®ä¸º `cover`ï¼Œè·å–æ‰€æœ‰åŒºåŸŸå¡«å……ã€‚
åˆ¤æ–­è®¾å¤‡æ˜¯å¦å±äº iPhone Xï¼Œç»™å¤´éƒ¨åº•éƒ¨å¢åŠ **é€‚é…å±‚**
> `viewport-fit` æœ‰ 3 ä¸ªå€¼åˆ†åˆ«ä¸ºï¼š
> - `auto`ï¼šæ­¤å€¼ä¸å½±å“åˆå§‹å¸ƒå±€è§†å›¾ç«¯å£ï¼Œå¹¶ä¸”æ•´ä¸ªwebé¡µé¢éƒ½æ˜¯å¯æŸ¥çœ‹çš„ã€‚
> - `contain`ï¼š
è§†å›¾ç«¯å£æŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼Œä»¥é€‚åˆæ˜¾ç¤ºå†…åµŒçš„æœ€å¤§çŸ©å½¢ã€‚
> - `cover`ï¼šè§†å›¾ç«¯å£è¢«ç¼©æ”¾ä»¥å¡«å……è®¾å¤‡æ˜¾ç¤ºã€‚å¼ºçƒˆå»ºè®®ä½¿ç”¨ `safe area inset` å˜é‡ï¼Œä»¥ç¡®ä¿é‡è¦å†…å®¹ä¸ä¼šå‡ºç°åœ¨æ˜¾ç¤ºä¹‹å¤–ã€‚
#### è®¾ç½® viewport-fit ä¸º `cover`
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, viewport-fit=cover">
```
#### å¢åŠ é€‚é…å±‚
ä½¿ç”¨ `safe area inset` å˜é‡
```css
/* é€‚é… iPhone X é¡¶éƒ¨å¡«å……*/
@supports (top: env(safe-area-inset-top)){
  body,
  .header{
      padding-top: constant(safe-area-inset-top, 40px);
      padding-top: env(safe-area-inset-top, 40px);
      padding-top: var(safe-area-inset-top, 40px);
  }
}
/* åˆ¤æ–­iPhoneX å°† footer çš„ padding-bottom å¡«å……åˆ°æœ€åº•éƒ¨ */
@supports (bottom: env(safe-area-inset-bottom)){
    body,
    .footer{
        padding-bottom: constant(safe-area-inset-bottom, 20px);
        padding-bottom: env(safe-area-inset-bottom, 20px);
        padding-top: var(safe-area-inset-bottom, 20px);
    }
}
```
> `safe-area-inset-top`, `safe-area-inset-right`, `safe-area-inset-bottom`, `safe-area-inset-left`
`safe-area-inset-*`ç”±å››ä¸ªå®šä¹‰äº†è§†å£è¾¹ç¼˜å†…çŸ©å½¢çš„ `top`, `right`, `bottom` å’Œ `left` çš„ç¯å¢ƒå˜é‡ç»„æˆï¼Œè¿™æ ·å¯ä»¥å®‰å…¨åœ°æ”¾å…¥å†…å®¹ï¼Œè€Œä¸ä¼šæœ‰è¢«éçŸ©å½¢çš„æ˜¾ç¤ºåˆ‡æ–­çš„é£é™©ã€‚å¯¹äºçŸ©å½¢è§†å£ï¼Œä¾‹å¦‚æ™®é€šçš„ç¬”è®°æœ¬ç”µè„‘æ˜¾ç¤ºå™¨ï¼Œå…¶å€¼ç­‰äºé›¶ã€‚ å¯¹äºéçŸ©å½¢æ˜¾ç¤ºå™¨ï¼ˆå¦‚åœ†å½¢è¡¨ç›˜ï¼Œ`iPhoneX` å±å¹•ï¼‰ï¼Œåœ¨ç”¨æˆ·ä»£ç†è®¾ç½®çš„å››ä¸ªå€¼å½¢æˆçš„çŸ©å½¢å†…ï¼Œæ‰€æœ‰å†…å®¹å‡å¯è§ã€‚

å…¶ä¸­ `env()` ç”¨æ³•ä¸º `env( <custom-ident> , <declaration-value>? )`ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè‡ªå®šä¹‰çš„åŒºåŸŸï¼Œç¬¬äºŒä¸ªä¸ºå¤‡ç”¨å€¼ã€‚

å…¶ä¸­ `var()` ç”¨æ³•ä¸º `var( <custom-property-name> , <declaration-value>? )`ï¼Œä½œç”¨æ˜¯åœ¨ `env()` ä¸ç”Ÿæ•ˆçš„æƒ…å†µä¸‹ï¼Œç»™å‡ºä¸€ä¸ªå¤‡ç”¨å€¼ã€‚

`constantï¼ˆï¼‰` è¢« `css` 2017-2018 å¹´ä¸ºè‰ç¨¿é˜¶æ®µï¼Œæ˜¯å¦å·²è¢«æ ‡å‡†åŒ–æœªçŸ¥ã€‚è€Œå…¶ä»–iOS æµè§ˆå™¨ç‰ˆæœ¬ä¸­æ˜¯å¦æœ‰æ­¤å‡½æ•°æœªçŸ¥ï¼Œä½œä¸ºå…¼å®¹å¤„ç†è€Œæ·»åŠ è¿›å»ã€‚

è¯¦æƒ…è¯·æŸ¥çœ‹æ–‡ç« æœ«å°¾çš„å‚è€ƒèµ„æ–™ã€‚

#### å…¼å®¹æ€§

![](https://user-gold-cdn.xitu.io/2019/12/20/16f212ff998e1ec1?w=2024&h=568&f=jpeg&s=142698)

## é¡µé¢ç”Ÿæˆä¸ºå›¾ç‰‡å’ŒäºŒç»´ç é—®é¢˜
### è¡¨ç°
åœ¨å·¥ä½œä¸­æœ‰éœ€è¦å°†é¡µé¢ç”Ÿæˆå›¾ç‰‡æˆ–è€…äºŒç»´ç çš„éœ€æ±‚ã€‚å¯èƒ½æˆ‘ä»¬ç¬¬ä¸€æƒ³åˆ°çš„ï¼Œäº¤ç»™åç«¯æ¥ç”Ÿæˆæ›´ç®€å•ã€‚ä½†æ˜¯è¿™æ ·æˆ‘ä»¬éœ€è¦æŠŠé¡µé¢ä»£ç å…¨éƒ¨ä¼ ç»™åç«¯ï¼Œç½‘ç»œæ€§èƒ½æ¶ˆè€—å¤ªå¤§ã€‚

### è§£å†³æ–¹æ¡ˆ
#### ç”ŸæˆäºŒç»´ç 
ä½¿ç”¨ QRCode ç”ŸæˆäºŒç»´ç 
```js 
import QRCode from 'qrcode';
// ä½¿ç”¨ async ç”Ÿæˆå›¾ç‰‡
const options = {};
const url = window.location.href;
async url => {
  try {
    console.log(await QRCode.toDataURL(url, options))
  } catch (err) {
    console.error(err);
  }
}
```
å°† `await QRCode.toDataURL(url, options)` èµ‹å€¼ç»™ å›¾ç‰‡ `url` å³å¯

#### ç”Ÿæˆå›¾ç‰‡
ä¸»è¦æ˜¯ä½¿ç”¨ `htmlToCanvas` ç”Ÿæˆ `canvas` ç”»å¸ƒ
```js
import html2canvas from 'html2canvas';

html2canvas(document.body).then(function(canvas) {
    document.body.appendChild(canvas);
});
```
ä½†æ˜¯ä¸å•å•åœ¨æ­¤å¤„å°±å®Œäº†ï¼Œç”±äºæ˜¯ `canvas` çš„åŸå› ã€‚ç§»åŠ¨ç«¯ç”Ÿæˆå‡ºæ¥çš„å›¾ç‰‡æ¯”è¾ƒæ¨¡ç³Šã€‚

æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ–°çš„ `canvas` æ–¹æ³•å¤šå€ç”Ÿæˆï¼Œæ”¾å…¥ä¸€å€å®¹å™¨é‡Œé¢ï¼Œè¾¾åˆ°æ›´åŠ æ¸…æ™°çš„æ•ˆæœï¼Œé€šè¿‡è¶…é“¾æ¥ä¸‹è½½å›¾ç‰‡
**ä¸‹è½½æ–‡ä»¶ç®€å•å®ç°ï¼Œæ›´å®Œæ•´çš„å®ç°æ–¹å¼ä¹‹åæ›´æ–°**
```js
const scaleSize = 2;
const newCanvas = document.createElement("canvas");
const target = document.querySelector('div');
const width = parseInt(window.getComputedStyle(target).width);
const height = parseInt(window.getComputedStyle(target).height);
newCanvas.width = width * scaleSize;
newCanvas.height = widthh * scaleSize;
newCanvas.style.width = width + "px";
newCanvas.style.height =width + "px";
const context = newCanvas.getContext("2d");
context.scale(scaleSize, scaleSize);
html2canvas(document.querySelector('.demo'), { canvas: newCanvas }).then(function(canvas) {
  // ç®€å•çš„é€šè¿‡è¶…é“¾æ¥è®¾ç½®ä¸‹è½½åŠŸèƒ½
  document.querySelector(".btn").setAttribute('href', canvas.toDataURL());
}
```
> æ ¹æ®éœ€è¦è®¾ç½® `scaleSize` å¤§å°

## å¾®ä¿¡å…¬ä¼—å·åˆ†äº«é—®é¢˜
### è¡¨ç°
åœ¨å¾®ä¿¡å…¬ä¼—å· H5 å¼€å‘ä¸­ï¼Œé¡µé¢å†…éƒ¨ç‚¹å‡»åˆ†äº«æŒ‰é’®è°ƒç”¨ SDKï¼Œæ–¹æ³•ä¸ç”Ÿæ•ˆã€‚
### è§£å†³æ–¹æ¡ˆ
#### è§£å†³æ–¹æ³•ï¼šæ·»åŠ ä¸€å±‚è’™å±‚ï¼Œåšåˆ†äº«å¼•å¯¼ã€‚
å› ä¸ºé¡µé¢å†…éƒ¨ç‚¹å‡»åˆ†äº«æŒ‰é’®æ— æ³•ç›´æ¥è°ƒç”¨ï¼Œè€Œåˆ†äº«åŠŸèƒ½éœ€è¦ç‚¹å‡»å³ä¸Šè§’æ›´å¤šæ¥æ“ä½œã€‚

ç„¶åç”¨æˆ·å¯èƒ½ä¸çŸ¥é“é€šè¿‡å³ä¸Šè§’å°æ ‡é‡Œé¢çš„åŠŸèƒ½åˆ†äº«ã€‚åˆæƒ³å¼•å¯¼ç”¨æˆ·åˆ†äº«ï¼Œè¿™æ—¶åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ

æŠ€æœ¯æ— æ³•å®ç°çš„ï¼Œä»äº§å“å‡ºå‘ã€‚


![](https://user-gold-cdn.xitu.io/2019/12/20/16f1efa63207199b?w=328&h=574&f=jpeg&s=55215)

**å¦‚æœæŠ€æœ¯ä¸Šå®ç°å¤æ‚ï¼Œæˆ–è€…ç›´æ¥ä¸èƒ½å®ç°ã€‚ä¸è¦å¼ºè¡Œé’»ç‰›è§’å°–å“¦ï¼Œå­¦ä¼šæ€¼äº§å“ï¼Œä¹Ÿæ˜¯ç¨‹åºå‘˜å¿…å¤‡çš„èƒ½åŠ›ä¹‹ä¸€ã€‚**

## H5 è°ƒç”¨ SDK ç›¸å…³è§£å†³æ–¹æ¡ˆ
### äº§ç”ŸåŸå› 
åœ¨ Hybrid App ä¸­ä½¿ç”¨ H5 æ˜¯æœ€å¸¸è§çš„ä¸è¿‡äº†ï¼Œåˆšæ¥è§¦çš„ï¼Œè‚¯å®šä¼šå¾ˆç”Ÿç–æ¨¡ç³Šã€‚ä¸çŸ¥é“ H5 å’Œ Hybrid æ˜¯æ€ä¹ˆäº¤äº’çš„ã€‚æ€æ ·åŒæ—¶æ”¯æŒ iOS å’Œ Android å‘¢ï¼Ÿç°åœ¨æ¥è°ˆè°ˆ Hybrid æŠ€æœ¯è¦ç‚¹ï¼Œ**åŸç”Ÿä¸ H5 çš„é€šä¿¡**ã€‚

### è§£å†³æ–¹æ¡ˆ
![](https://user-gold-cdn.xitu.io/2019/12/20/16f21bc7e4d19065?w=1740&h=448&f=jpeg&s=62616)
ä½¿ç”¨ `DSBridge` åŒæ—¶æ”¯æŒ iOS ä¸ Android
> æ–‡æ¡£è§å‚è€ƒèµ„æ–™

#### SDKå°ç»„ æä¾›æ–¹æ³•
1. æ³¨å†Œæ–¹æ³• `bridge.register`
```js
bridge.register('enterApp', function() {
  broadcast.emit('ENTER_APP')
})
```
2. å›è°ƒæ–¹æ³• `bridge.call`
```js
export const getSDKVersion = () => bridge.call('BLT.getSDKVersion')
```

#### äº‹ä»¶ç›‘å¬ä¸è§¦å‘æ³•
```js
const broadcast = {
  on: function(name, fn, pluralable) {
    this._on(name, fn, pluralable, false)
  },
  once: function(name, fn, pluralable) {
    this._on(name, fn, pluralable, true)
  },
  _on: function(name, fn, pluralable, once) {
    let eventData = broadcast.data
    let fnObj = { fn: fn, once: once }
    if (pluralable && Object.prototype.hasOwnProperty.call(eventData, 'name')) {
      eventData[name].push(fnObj)
    } else {
      eventData[name] = [fnObj]
    }
    return this
  },
  emit: function(name, data, thisArg) {
    let fn, fnList, i, len
    thisArg = thisArg || null
    fnList = broadcast.data[name] || []
    for (i = 0, len = fnList.length; i < len; i++) {
      fn = fnList[i].fn
      fn.apply(thisArg, [data, name])
      if (fnList[i].once) {
        fnList.splice(i, 1)
        i--
        len--
      }
    }
    return this
  },
  data: {}
}
export default broadcast
```

#### è¸©å‘æ³¨æ„
æ–¹æ³•è°ƒç”¨å‰ï¼Œä¸€å®šè¦åˆ¤æ–­ SDK æ˜¯å¦æä¾›è¯¥æ–¹æ³•
å¦‚æœ Android æä¾›è¯¥æ–¹æ³•ï¼ŒiOS ä¸Šè°ƒç”¨å°±ä¼šå‡ºç°ä¸€ä¸ªæ–¹æ³•**è°ƒç”¨å¤±è´¥ç­‰å¼¹çª—**ã€‚
æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ

æä¾›ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ Androidã€iOSã€‚æ ¹æ®è®¾å¤‡è¿›è¡Œåˆ¤æ–­
```
export const hasNativeMethod = (name) =>
  return bridge.hasNativeMethod('BYJ.' + name)
}

export const getSDKVersion = function() {
  if (hasNativeMethod('getSDKVersion')) {
    bridge.call('BYJ.getSDKVersion')
  }
}
```
> åŒä¸€åŠŸèƒ½éœ€è¦iOSï¼ŒAndroidæ–¹æ³•åç›¸åŒï¼Œè¿™æ ·æ›´å¥½å¤„ç†å“¦

## H5 è°ƒè¯•ç›¸å…³æ–¹æ¡ˆç­–ç•¥
### è¡¨ç°
è°ƒè¯•ä»£ç ä¸€èˆ¬å°±æ˜¯ä¸ºäº†**æŸ¥çœ‹æ•°æ®**å’Œ**å®šä½ bug**ã€‚åˆ†ä¸ºä¸¤ç§åœºæ™¯ï¼Œä¸€ç§æ˜¯å¼€å‘å’Œæµ‹è¯•æ—¶è°ƒè¯•ï¼Œä¸€ç§æ˜¯ç”Ÿäº§ç¯å¢ƒä¸Šè°ƒè¯•ã€‚
> ä¸ºä»€ä¹ˆæœ‰ç”Ÿäº§ç¯å¢ƒä¸Šè°ƒè¯•å‘¢ï¼Ÿæœ‰äº›æ—¶å€™æµ‹è¯•ç¯å¢ƒä¸Šæ²¡æ³•å¤ç°è¿™ä¸ª bugï¼Œæµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸ä¸€è‡´ï¼Œæ­¤æ—¶å°±éœ€è¦ç´§æ€¥ç”Ÿäº§è°ƒè¯•ã€‚

åœ¨ PC ç«¯å¼€å‘æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰å‡ºæ§åˆ¶å°ï¼Œä½¿ç”¨æµè§ˆå™¨æä¾›çš„å·¥å…·æ“ä½œdevtoolsæˆ–è€…æŸ¥çœ‹æ—¥å¿—ã€‚ä½†æ˜¯åœ¨ App å†…éƒ¨æˆ‘ä»¬æ€ä¹ˆåšå‘¢ï¼Ÿ

### åŸç†ä¸è§£å†³æ–¹æ¡ˆ

#### 1. `vconsole` æ§åˆ¶å°æ’ä»¶
ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•
```js
import Vconsole from 'vconsole'

new Vconsole()
```

![](https://user-gold-cdn.xitu.io/2019/12/19/16f1d57bc648e216?w=1208&h=906&f=jpeg&s=56866)

æœ‰å…´è¶£çœ‹çœ‹å®ƒå®ç°çš„åŸºæœ¬åŸç†ï¼Œæˆ‘ä»¬å…³æ³¨çš„ç‚¹åº”è¯¥åœ¨ **vsconsole å¦‚ä½•æ‰“å°å‡ºæˆ‘ä»¬æ‰€æœ‰ log çš„** [è…¾è®¯å¼€æºvconsole](https://github.com/Tencent/vConsole/blob/dev/src/core/core.js)

ä¸Šè¿°æ–¹æ³•ä»…ç”¨äºå¼€å‘å’Œæµ‹è¯•ã€‚**ç”Ÿäº§ç¯å¢ƒä¸­ä¸å…è®¸å‡ºç°ï¼Œæ‰€ä»¥ï¼Œä½¿ç”¨æ—¶éœ€è¦å¯¹ç¯å¢ƒè¿›è¡Œåˆ¤æ–­ã€‚**

```js
import Vconsole from 'vconsole'
if (process.env.NODE_ENV !== 'production') {
    new Vconsole()
}
```

#### 2. ä»£ç† + spy-debugger
æ“ä½œç¨å¾®æœ‰ç‚¹éº»çƒ¦ï¼Œä¸è¿‡æˆ‘ä¼šè¯¦ç»†å†™å‡ºï¼Œå¤§è‡´åˆ†ä¸º 4 ä¸ªæ­¥éª¤

1. å®‰è£…æ’ä»¶(å…¨å±€å®‰è£…)
```sh
sudo npm install spy-debugger -g
```
2. æ‰‹æœºä¸ç”µè„‘ç½®äºåŒä¸€ wifi ä¸‹ï¼Œæ‰‹æœºè®¾ç½®ä»£ç†

è®¾ç½®æ‰‹æœºçš„ HTTP ä»£ç†ï¼Œä»£ç† IP åœ°å€è®¾ç½®ä¸º PC çš„ IP åœ°å€ï¼Œç«¯å£ä¸º`spy-debugger`çš„å¯åŠ¨ç«¯å£
> spy-debugger é»˜è®¤ç«¯å£ï¼š9888

> Android ï¼šè®¾ç½® - WLAN - é•¿æŒ‰é€‰ä¸­ç½‘ç»œ - ä¿®æ”¹ç½‘ç»œ - é«˜çº§ - ä»£ç†è®¾ç½® - æ‰‹åŠ¨

> IOS ï¼šè®¾ç½® - Wi-Fi - é€‰ä¸­ç½‘ç»œ, ç‚¹å‡»æ„Ÿå¹å·, HTTP ä»£ç†æ‰‹åŠ¨


3. æ‰‹æœºæ‰“å¼€æµè§ˆå™¨æˆ–è€… app ä¸­ H5 é¡µé¢
4. æ‰“å¼€æ¡Œé¢æ—¥å¿—ç½‘ç«™è¿›è¡Œè°ƒè¯•ï¼Œç‚¹å‡» npm æ§åˆ¶å°ç›‘å¬åœ°å€ã€‚æŸ¥çœ‹æŠ“åŒ…å’Œ H5 é¡µé¢ç»“æ„

**è¿™ç§æ–¹å¼å¯ä»¥è°ƒè¯•ç”Ÿæˆç¯å¢ƒçš„é¡µé¢ï¼Œä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œå¯ä»¥åº”ä»˜å¤§å¤šæ•°è°ƒè¯•éœ€æ±‚**


# æ€»ç»“
æœ¬ç¯‡æ–‡ç« è€—è´¹ä½œè€…ä¸€ä¸ªå¤šæ˜ŸæœŸçš„ä¸šä½™æ—¶é—´ï¼Œå­˜æ‰‹å·¥æ•²æ‰“ 4500 +å­—ï¼ŒåŒæ—¶æ”¶é›†ï¼Œæ•´ç†ä¹‹å‰å¾ˆå¤šå‘ç‚¹å’Œè¾¹å†™ä½œè¾¹**æ€è€ƒ**å’Œ**æ€»ç»“**ã€‚å¦‚æœèƒ½å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¾¿æ˜¯å®ƒæœ€å¤§çš„ä»·å€¼ã€‚éƒ½çœ‹åˆ°è¿™é‡Œè¿˜ä¸**ç‚¹èµ**ï¼Œå¤ªè¿‡ä¸å»å•¦ï¼ğŸ˜„

ç”±äºæŠ€æœ¯æ°´å¹³æœ‰é™ï¼Œæ–‡ç« ä¸­å¦‚æœ‰é”™è¯¯åœ°æ–¹ï¼Œè¯·åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œæ„Ÿè°¢ï¼

å…³äºç§»åŠ¨ç«¯ H5 çš„æ–‡ç« å‘Šä¸€æ®µè½äº†ï¼Œä¹‹åå®è·µä¸­é‡åˆ°çš„é—®é¢˜éƒ½å°†åœ¨æ­¤æ–‡ä¸­æ›´æ–°ã€‚å¦å¤–å‡†å¤‡åšä¸€ä¸ªç§»åŠ¨ç«¯ H5 å¼€æºé¡¹ç›®ã€‚å¤šå…³æ³¨ä¸‹ [æˆ‘çš„github](https://github.com/suoyuesmile/suo-blog)åŠ¨æ€å“¦ï¼

ä¹‹åï¼Œåº”è¯¥å›å»ç ”ç©¶ä¸‹**å¼€æºå’Œé¢è¯•é¢˜ç›¸å…³å†…å®¹**åˆ†äº«ï¼Œæƒ³æŒç»­äº†è§£æ›´å¤šï¼Œä¸å¦¨**ç‚¹èµ**å’Œ**å…³æ³¨**å‘—ã€‚
# å‚è€ƒèµ„æ–™
- [Safari CSS Reference](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/css/property/-webkit-overflow-scrolling)
- [MDN touch äº‹ä»¶]()
- [MDN css var()](https://developer.mozilla.org/zh-CN/docs/Web/CSS/var)
- [MDN css env()](https://developer.mozilla.org/zh-CN/docs/Web/CSS/env)
- [csswg env() drafts](https://drafts.csswg.org/css-env-1/)
- [fastclick æºç ](https://github.com/ftlabs/fastclick/blob/master/lib/fastclick.js)
- [DSBridge-Android](https://github.com/wendux/DSBridge-Android) & [DSBridge-iOS](https://github.com/wendux/DSBridge-IOS) 
- [qrcodejs æºç ](https://github.com/davidshimjs/qrcodejs)
- [html2canvas æºç ](https://github.com/niklasvh/html2canvas)
- [å…³äºH5é¡µé¢åœ¨iPhoneXé€‚é…](https://www.cnblogs.com/lolDragon/p/7795174.html)
- [vant ç›¸å…³æ–‡æ¡£](https://youzan.github.io/vant/#/zh-CN/button)
